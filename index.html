<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini site</title>

  <style>
    body {
      font-family: system-ui, Arial, sans-serif;
      margin: 32px;
    }

    .box {
      max-width: 520px;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 16px;
      position: relative;
      z-index: 1;
      background: white;
    }

    input#answer {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      border: 2px solid #bbb;
      border-radius: 12px;
      outline: none;
      box-sizing: border-box;
      transition: border-color 150ms, box-shadow 150ms;
    }

    .ok input#answer {
      border-color: #1a7f37;
      box-shadow: 0 0 18px rgba(26,127,55,.35);
    }

    .bad input#answer {
      border-color: #d1242f;
      box-shadow: 0 0 18px rgba(209,36,47,.25);
    }

    .msg {
      margin-top: 14px;
      font-size: 18px;
      min-height: 26px;
    }

    .hint {
      margin-top: 10px;
      font-size: 14px;
      color: #666;
    }

    #fx {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9998;
      display: none;
    }

    #confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 9999;
      display: none;
    }

    .confetto {
      position: absolute;
      top: -12px;
      width: 10px;
      height: 14px;
      opacity: 0.95;
      animation-name: confettiFall;
      animation-timing-function: linear;
      animation-fill-mode: forwards;
    }

    @keyframes confettiFall {
      to {
        transform: translateY(110vh) rotate(540deg);
        opacity: 0.25;
      }
    }

    .winCard {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(0.92);
      opacity: 0;
      pointer-events: none;
      z-index: 10000;
      transition: 220ms ease;
      background: rgba(255,255,255,0.92);
      border: 1px solid rgba(0,0,0,0.12);
      border-radius: 18px;
      padding: 12px;
      max-width: min(420px, 84vw);
      box-shadow: 0 18px 60px rgba(0,0,0,0.22);
    }

    .winCard.show {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    .winCard img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 14px;
    }

    .winText {
      margin: 14px 6px 4px;
      font-size: 18px;
      line-height: 1.4;
      text-align: center;
      color: #111;
    }
  </style>
</head>
<body>

  <h1>Entre la r√©ponse</h1>

  <div class="box" id="wrap">
    <input
      id="answer"
      type="text"
      placeholder="Tape ta r√©ponse puis appuie sur ENTER"
      autocomplete="off"
    />

    <div class="msg" id="msg"></div>
    <div class="hint">Validation uniquement avec la touche ENTER</div>
  </div>

  <canvas id="fx"></canvas>
  <div id="confetti"></div>

  <div id="winCard" class="winCard" aria-hidden="true">
    <img id="winImg" alt="Bravo" />
    <p class="winText">Un pr√©nom est r√©v√©l√©. Une autre √©toile reste √† nommer.</p>
  </div>

  <script>
    const SECRET = "DIANE";

    // ‚úÖ chemin avec accent
    const WIN_IMAGE_SRC = "assets/√©toiles.png";

    const wrap = document.getElementById("wrap");
    const input = document.getElementById("answer");
    const msg = document.getElementById("msg");

    const fxCanvas = document.getElementById("fx");
    const fxCtx = fxCanvas.getContext("2d");
    const confettiLayer = document.getElementById("confetti");
    const winCard = document.getElementById("winCard");
    const winImg = document.getElementById("winImg");

    let solved = false;

    function resizeFx() {
      fxCanvas.width = window.innerWidth;
      fxCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeFx);
    resizeFx();

    function normalize(text) {
      return (text || "").trim().toUpperCase();
    }

    function resetState() {
      wrap.classList.remove("ok", "bad");
      msg.textContent = "";
    }

    const failureMessages = [
      "Pas encore, mais tu peux r√©essayer üôÇ",
      "Ce n‚Äôest pas la bonne r√©ponse, continue !",
      "Presque‚Ä¶ enfin pas encore üòâ",
      "Rat√© cette fois, mais ne l√¢che pas.",
      "Ce n‚Äôest pas √ßa, essaie autrement.",
      "Mauvaise r√©ponse, mais tu es sur la bonne voie.",
      "Non, mais rien n‚Äôest perdu !",
      "Ce n‚Äôest pas correct pour l‚Äôinstant.",
      "Pas exactement, retente ta chance.",
      "Dommage‚Ä¶ mais la solution existe üòâ"
    ];

    function randomFailureMessage() {
      return failureMessages[Math.floor(Math.random() * failureMessages.length)];
    }

    function showWinCard() {
      winImg.src = WIN_IMAGE_SRC;
      winCard.classList.add("show");
      winCard.setAttribute("aria-hidden", "false");
    }

    function launchConfetti(durationMs = 3600) {
      confettiLayer.innerHTML = "";
      confettiLayer.style.display = "block";

      const colors = ["#22c55e", "#16a34a", "#f97316", "#eab308", "#3b82f6", "#a855f7", "#ef4444"];
      const start = Date.now();

      function spawnBatch() {
        if (Date.now() - start > durationMs) {
          setTimeout(() => {
            confettiLayer.style.display = "none";
            confettiLayer.innerHTML = "";
          }, 1200);
          return;
        }

        for (let i = 0; i < 14; i++) {
          const c = document.createElement("div");
          c.className = "confetto";
          const size = 6 + Math.random() * 10;
          c.style.width = size + "px";
          c.style.height = size * 1.4 + "px";
          c.style.left = Math.random() * 100 + "vw";
          c.style.background = colors[Math.floor(Math.random() * colors.length)];
          c.style.animationDuration = 1100 + Math.random() * 1700 + "ms";
          c.style.animationDelay = Math.random() * 120 + "ms";
          confettiLayer.appendChild(c);
          setTimeout(() => c.remove(), 2200);
        }

        requestAnimationFrame(spawnBatch);
      }

      requestAnimationFrame(spawnBatch);
    }

    function launchFireworks(durationMs = 3200) {
      fxCanvas.style.display = "block";
      const particles = [];
      const start = performance.now();

      function rand(a, b) { return a + Math.random() * (b - a); }

      function burst() {
        const x = rand(fxCanvas.width * 0.15, fxCanvas.width * 0.85);
        const y = rand(fxCanvas.height * 0.12, fxCanvas.height * 0.45);
        for (let i = 0; i < 60; i++) {
          particles.push({
            x, y,
            vx: Math.cos(Math.random() * Math.PI * 2) * rand(2, 6),
            vy: Math.sin(Math.random() * Math.PI * 2) * rand(2, 6),
            life: 60,
            size: rand(1.2, 2.6),
            h: Math.random() * 360
          });
        }
      }

      let last = 0;

      function tick(t) {
        const elapsed = t - start;
        fxCtx.fillStyle = "rgba(0,0,0,0.18)";
        fxCtx.fillRect(0, 0, fxCanvas.width, fxCanvas.height);

        if (elapsed < durationMs && t - last > 200) {
          burst();
          last = t;
        }

        for (let i = particles.length - 1; i >= 0; i--) {
          const p = particles[i];
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.06;
          p.life--;

          fxCtx.fillStyle = `hsla(${p.h},95%,60%,${p.life / 60})`;
          fxCtx.beginPath();
          fxCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          fxCtx.fill();

          if (p.life <= 0) particles.splice(i, 1);
        }

        if (elapsed > durationMs && particles.length === 0) {
          fxCanvas.style.display = "none";
          fxCtx.clearRect(0, 0, fxCanvas.width, fxCanvas.height);
          return;
        }

        requestAnimationFrame(tick);
      }

      requestAnimationFrame(tick);
    }

    function celebrateWin() {
      launchFireworks(3200);
      launchConfetti(3600);
      setTimeout(showWinCard, 3600);
    }

    function checkAnswer() {
      const value = normalize(input.value);
      if (!value) return;

      if (value === normalize(SECRET)) {
        if (solved) return;
        solved = true;

        wrap.classList.remove("bad");
        wrap.classList.add("ok");
        msg.textContent = "üéâ Bravo, tu as trouv√© la bonne r√©ponse !";

        celebrateWin();
      } else {
        wrap.classList.remove("ok");
        wrap.classList.add("bad");
        msg.textContent = randomFailureMessage();
      }
    }

    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        checkAnswer();
      } else if (!solved) {
        resetState();
      }
    });

    input.focus();
  </script>
</body>
</html>



</body>
</html>
